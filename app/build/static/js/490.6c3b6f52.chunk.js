"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[490],{7357:(e,s,a)=>{a.a(e,(async(e,t)=>{try{a.d(s,{Z:()=>m});var l=a(2791),r=a(1946),n=a(6128),i=a(184),d=e([r]);function m(e){let{handleSubmit:s,closeModal:a,createUser:t,update:d=!1,updateData:o={}}=e;const[m,c]=(0,l.useState)([]),[u,h]=(0,l.useState)([{name:"username",label:"Username",value:""},{name:"email",label:"Email",value:""},{name:"first_name",label:"First Name",value:""},{name:"last_name",label:"Last Name",value:""},{name:"department",label:"Department",value:""},{name:"position",label:"Position",value:""},{name:"phone_no",label:"Phone No.",value:""},{name:"site_address",label:"Site Address",value:""},{name:"country",label:"Country",value:""},{name:"state",label:"State",value:""},{name:"suburb",label:"SubUrb",value:""},{name:"expiration_date",label:"Expiration Date",value:""},{name:"MFA",label:"MFA",value:"No"},{name:"role",label:"Role",value:"Guest"}]);(0,l.useEffect)((()=>{x(),d&&(async()=>{try{h((e=>{const s=[...e];return s.forEach((e=>{e.value=o[e.name]||""})),s}))}catch(e){console.error("Error initializing fields for update:",e)}})()}),[]);const x=async()=>{try{const e=await r.Z.get("http://localhost:8009/milestone/api/v1/user/role");h((s=>{const a=s.findIndex((e=>"role"===e.name)),t=[...s];t[a].options=null===e||void 0===e?void 0:e.data;return t[s.findIndex((e=>"MFA"===e.name))].options=[{name:"Yes"},{name:"No"}],t}))}catch(e){console.error("Error fetching roles:",e)}},b=(e,s)=>{h((a=>{const t=a.findIndex((s=>s.name===e)),l=[...a];return l[t].value=s,l}))};return(0,i.jsx)(n.Z,{children:(0,i.jsx)("form",{onSubmit:e=>(async e=>{e.preventDefault();const s={};u.forEach((e=>{s[e.name]=e.value})),c([...m,s]);const a=u.reduce(((e,s)=>({...e,[s.name]:s.value})),{}),l=await r.Z.post("user/",a);t(l)})(e),children:(0,i.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,i.jsx)("div",{className:"flex items-end justify-center min-h-screen h-40 pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:(0,i.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left shadow-xl transform transition-all sm:my-8 sm:align-middle w-[90vh]",children:[(0,i.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 !important",children:(0,i.jsxs)("div",{className:"border p-4",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Create a New User"}),u.map((e=>(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-600",children:[e.label,":"]}),e.options?(0,i.jsx)("select",{id:e.name,value:e.value,onChange:s=>b(e.name,s.target.value),className:"mt-1 p-2 border rounded w-full",required:!0,children:e.options.map((e=>(0,i.jsx)("option",{value:e.name,children:e.name},e.name)))}):(0,i.jsx)("input",{type:e.type||"text",id:e.name,value:e.value,onChange:s=>b(e.name,s.target.value),placeholder:"Enter ".concat(e.label),className:"mt-1 p-2 border rounded w-full",required:!0})]},e.name)))]})}),(0,i.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,i.jsx)("button",{type:"button",onClick:()=>(h((e=>{const s=[...e];return s.forEach((e=>{e.value=""})),s})),void a()),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded",children:!0===d?"Update User":"Save User"})]})]})})})})})}r=(d.then?(await d)():d)[0],t()}catch(o){t(o)}}))},1741:(e,s,a)=>{a.d(s,{Z:()=>n});a(2791);var t=a(3494),l=a.n(t),r=a(184);const n={DeleteModal:e=>{let{handleConfirmDelete:s,handleCloseModal:a}=e;return(0,r.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,r.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,r.jsx)("div",{className:"sm:flex sm:items-start",children:(0,r.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Deletion"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this item?"})})]})})}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Confirm"}),(0,r.jsx)("button",{type:"button",onClick:a,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})},PreviewModal:e=>{let{handleDownloadFile:s,handleCloseModal:a,ext:t,path:n,file:i}=e;return(0,r.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-end justify-center min-h-screen h-40 pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:a})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left shadow-xl transform transition-all sm:my-8 sm:align-middle w-[90vh]",children:[(0,r.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 !important",children:(0,r.jsx)(l(),{fileType:t,filePath:n})}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,r.jsx)("button",{type:"button",onClick:a,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"}),(0,r.jsx)("a",{href:"http://localhost:8009/milestone/api/v1/file/download/".concat(i),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Download"})]})]})]})})}}},4490:(e,s,a)=>{a.a(e,(async(e,t)=>{try{a.r(s),a.d(s,{default:()=>m});var l=a(2791),r=a(7357),n=a(1946),i=a(1741),d=a(184),o=e([r,n]);[r,n]=o.then?(await o)():o;const m=()=>{var e;const[s,a]=(0,l.useState)([]),[t,o]=(0,l.useState)([]),[m,c]=(0,l.useState)(!1),[u,h]=(0,l.useState)(null),[x,b]=(0,l.useState)(!1),[p,f]=(0,l.useState)(!1),[j,g]=(0,l.useState)([]),[v,y]=(0,l.useState)([]),N=()=>{c(!1),g([]),y(!1)};(0,l.useEffect)((()=>{w()}),[o]);const w=async()=>{o(!0);const e=await n.Z.get("/user/");a(e),o(!1)},C=()=>{b(!1),h(null),o(!1)};return(0,d.jsxs)("div",{className:"flex justify-around h-full w-full bg-secondary p-5",children:[x&&(0,d.jsx)(i.Z.DeleteModal,{handleCloseModal:C,handleConfirmDelete:async()=>{o(!0);await n.Z.delete("/user/?user_id=".concat(u));C(),o(!1)}}),m&&(0,d.jsx)(r.Z,{update:v,updateData:j,createUser:e=>{o(!0),N()},closeModal:N}),(0,d.jsxs)("div",{className:"border p-4 w-1/2 flex-1 overflow-scroll  rounded-md bg-primary",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Users Table"}),(0,d.jsx)("h2",{onClick:()=>{c(!0),y(!1)},className:"text-lg font-semibold mb-4 border-2 border-cyan-100 w-28 px-2 hover:bg-primary rounded-md text-center text-slate-600 cursor-pointer text-gray-200",children:"Add New"}),(0,d.jsxs)("table",{className:"w-full border-collapse",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"border p-2",children:"Username"}),(0,d.jsx)("th",{className:"border p-2",children:"Email"}),(0,d.jsx)("th",{className:"border p-2",children:"Name"}),(0,d.jsx)("th",{className:"border p-2",children:"Department"}),(0,d.jsx)("th",{className:"border p-2",children:"Position"}),(0,d.jsx)("th",{className:"border p-2",children:"Phone No."}),(0,d.jsx)("th",{className:"border p-2",children:"Site Address"}),(0,d.jsx)("th",{className:"border p-2",children:"Country"}),(0,d.jsx)("th",{className:"border p-2",children:"State"}),(0,d.jsx)("th",{className:"border p-2",children:"SubUrb"}),(0,d.jsx)("th",{className:"border p-2",children:"Expiration Date"}),(0,d.jsx)("th",{className:"border p-2",children:"MFA"}),(0,d.jsx)("th",{className:"p-2",children:"Action"})]})}),(0,d.jsx)("tbody",{children:(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.length)>0&&s.data.map(((e,s)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"border p-2",children:e.username}),(0,d.jsx)("td",{className:"border p-2",children:e.email}),(0,d.jsxs)("td",{className:"border p-2",children:[e.first_name," ",e.last_name]}),(0,d.jsx)("td",{className:"border p-2",children:e.department}),(0,d.jsx)("td",{className:"border p-2",children:e.position}),(0,d.jsx)("td",{className:"border p-2",children:e.phone_no}),(0,d.jsx)("td",{className:"border p-2",children:e.site_address}),(0,d.jsx)("td",{className:"border p-2",children:e.country}),(0,d.jsx)("td",{className:"border p-2",children:e.state}),(0,d.jsx)("td",{className:"border p-2",children:e.suburb}),(0,d.jsx)("td",{className:"border p-2",children:e.MFA}),(0,d.jsx)("td",{className:"border p-2",children:e.role}),(0,d.jsxs)("td",{className:"flex flex-row px-6 py-4 gap-2 items-center align-center justify-center",children:[(0,d.jsx)("a",{onClick:()=>(e=>{c(!0),o(!0),g(e),y(!0)})(e),href:"#",className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),(0,d.jsx)("a",{onClick:()=>{return s=e.id,h(s),void b(!0);var s},href:"#",className:"font-medium text-red-500 dark:text-blue-500 hover:underline",children:"Delete"})]})]},s)))})]})]})]})};t()}catch(m){t(m)}}))}}]);
//# sourceMappingURL=490.6c3b6f52.chunk.js.map